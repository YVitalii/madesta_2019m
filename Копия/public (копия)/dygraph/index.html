<html>
<head>
<!-- <script type="text/javascript" src="dygraph.js"></script> -->
<script src="dygraph.min.js"></script>
<link rel="stylesheet" src="dygraph.css" />
</head>
<body>
<div id="graphdiv"></div>





<script type="text/javascript">
var dygr={};
dygr['data']=[
  [new Date("2009/07/12 12:34:56"),0,10,0,0]
  ,
];

dygr["data"][1]=[new Date("2009/07/12 13:34:56"),50,150,0,0];
dygr["data"][2]=[new Date("2009/07/12 14:44:56"),500,1000,0,0];
console.log(dygr.data);
dygr["graph"] = new Dygraph(graphdiv, dygr.data,
                            { title:"График температурного режима",
                              showRoller: true,
                              labels:['t','T1',"T2","T3","T4"],
                              showRangeSelector: true,


                              legend: 'always',

                              ylabel: 'Температура (*С)',
                              labelsSeparateLines:true
                            });

  /*"data":,
  "getPoint": () => {

  },
}//dygr*/





</script>

<script type="text/javascript">
   var now=(new Date("2009/07/12 12:34:56")).getTime();
   var refresh=5000;
   console.log("now="+now);
   setInterval(
     ()=>{
       now=now+refresh;
       let line=[new Date(now),0,0,100,150]

       let end=[dygr.data.pop()];
       end.push(dygr.data.pop());
       dygr.data.push(line);
       dygr.data.push(end.pop());
       dygr.data.push(end.pop());
       console.log("data="+dygr.data);
       dygr.graph.updateOptions(  {'file':dygr.data });
     },
     refresh
   )


    //dygr.graph.updateOptions(  {'file':dygr.data });
    //console.log(dygr_data);
</script>
</body>
</html>
